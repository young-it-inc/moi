<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.youngit.office.api.product.mapper.ProductMapper">

    <!-- 검색 조건 -->
    <sql id="searchProduct">

    </sql>

    <!-- 제품 리스트 조회 및 검색 -->
    <select id="getOrSearchListProduct" resultType="ProductModel">
        select *
        from o_product
        where is_state_used = 'Y'
    </select>

    <!-- 제품 리스트 조회 및 검색 카운트 -->
    <select id="countGetOrSearchListProduct" resultType="int">
        select count(*)
        from o_product
        where is_state_used = 'Y'
    </select>

    <!-- 제품 개별 조회 -->
    <select id="getOneProduct" resultType="ProductModel">
        select *
        from o_product
        where product_serial_number = #{productSerialNumber} and is_state_used = 'Y'
    </select>

    <!-- 제품 등록 -->
    <insert id="registerProduct" parameterType="ProductModel">
        INSERT INTO o_product
            (product_serial_number, product_date, material_uniq_id, product_state_code, delivery_unit_price,
             disuse_date, client_builder_id, chaged_status_date, office_id,  is_state_used,
             as_uniq_id)
        VALUES (#{productSerialNumber}, #{productDate}, #{materialUniqId}, #{productStateCode}, #{deliveryUnitPrice},
                #{disuseDate}, #{clientBuilderId}, #{chagedStatusDate}, #{officeId}, #{isStateUsed},
                #{asUniqId})
    </insert>

    <!-- 제품 수정 -->
    <update id="updateProduct" parameterType="ProductModel">
        UPDATE o_product
        SET
            <if test ="product_serial_number != null and product_serial_number !=''">
                product_serial_number = #{productSerialNumber},
            </if>
            <if test ="product_date != null and product_date !=''">
                product_date = #{productDate},
            </if>
            <if test ="material_uniq_id != null and material_uniq_id !=''">
                material_uniq_id = #{materialUniqId},
            </if>
            <if test ="product_state_code != null and product_state_code !=''">
                product_state_code = #{productStateCode},
            </if>
            <if test ="delivery_unit_price != null and delivery_unit_price !=''">
                delivery_unit_price = #{deliveryUnitPrice},
            </if>
            <if test ="disuse_date != null and disuse_date !=''">
                disuse_date = #{disuseDate},
            </if>
            <if test ="client_builder_id != null and client_builder_id !=''">
                client_builder_id = #{clientBuilderId},
            </if>
            <if test ="chaged_status_date != null and chaged_status_date !=''">
                chaged_status_date = #{chagedStatusDate},
            </if>
            <if test ="office_id != null and office_id !=''">
                office_id = #{officeId},
            </if>
            <if test ="as_uniq_id != null and as_uniq_id !=''">
                as_uniq_id = #{asUniqId}
            </if>
         WHERE product_serial_number = #{productSerialNumber}
    </update>

    <!-- 제품 삭제(사실상 수정) -->
    <update id="deleteProduct" parameterType="String">
        UPDATE o_product
        SET is_state_used = 'N'
        WHERE product_serial_number = #{productSerialNumber}
    </update>


</mapper>